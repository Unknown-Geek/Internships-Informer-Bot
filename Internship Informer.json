{
  "name": "Internship Informer",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        432
      ],
      "id": "7764773e-6fcd-46ab-bb44-7b670fbdaac1",
      "name": "Telegram Trigger",
      "webhookId": "de03b2ad-85a1-463a-9a1a-6e3c307de84a",
      "credentials": {
        "telegramApi": {
          "id": "9cIs4u9GE5MJl8oy",
          "name": "Internships Bot"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"send_whatsapp\": true,\n  \"reason\": \"Internship matches eligibility and role criteria.\",\n  \"whatsapp_message\": \"ðŸ’¼ *Software Engineer Intern (2025â€“2027)*\\\\nCompany: Google\\\\nLocation: Bangalore\\\\nEligibility: 2027 graduates\\\\nApply here: https://careers.google.com/internships\"\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1360,
        656
      ],
      "id": "48b41b33-8ca3-4465-8c8d-817350c5d1de",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7c4709a1-e1dd-4021-99f2-f636a049bedd",
              "leftValue": "={{ $json.output.send_whatsapp }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1728,
        432
      ],
      "id": "c231d8eb-34ed-4bb1-abd2-31c075c613f6",
      "name": "If",
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://140.245.29.28:3000/send",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "to",
              "value": "+919074691700"
            },
            {
              "name": "message",
              "value": "={{ $('Analyst Agent').item.json.output.whatsapp_message }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1952,
        336
      ],
      "id": "57693de0-6d7f-4407-9243-f8abeda45725",
      "name": "HTTP Request",
      "retryOnFail": true,
      "waitBetweenTries": 3000
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "55rodsRwEXTr1JQQ",
          "mode": "list",
          "cachedResultName": "Internship Alerts",
          "cachedResultUrl": "/projects/Hgru1mywRGFa4uLZ/datatables/55rodsRwEXTr1JQQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "title": "={{ $('JSON Format Fixer').item.json.role }}",
            "Eligibilty": "={{ $('JSON Format Fixer').item.json.eligibility }}",
            "Application_Link": "={{ $('JSON Format Fixer').item.json.apply_link }}",
            "Company_Name": "={{ $('JSON Format Fixer').item.json.company }}"
          },
          "matchingColumns": [
            "Internship"
          ],
          "schema": [
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Company_Name",
              "displayName": "Company_Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Eligibilty",
              "displayName": "Eligibilty",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Application_Link",
              "displayName": "Application_Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        2176,
        432
      ],
      "id": "9d484794-9252-4087-be1d-a64e2ef2d3ce",
      "name": "Insert row",
      "retryOnFail": true,
      "waitBetweenTries": 3000
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "ALWAYS use this tool first. Input the internship title or application URL found in the message. This tool checks if the internship has already been sent to WhatsApp to prevent duplicates. If this tool returns a match, do not process further.",
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "55rodsRwEXTr1JQQ",
          "mode": "list",
          "cachedResultName": "Internship Alerts",
          "cachedResultUrl": "/projects/Hgru1mywRGFa4uLZ/datatables/55rodsRwEXTr1JQQ"
        },
        "returnAll": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}"
      },
      "type": "n8n-nodes-base.dataTableTool",
      "typeVersion": 1,
      "position": [
        1104,
        656
      ],
      "id": "6fe25313-8018-44fb-b726-5d346985f0ff",
      "name": "check_database_for_duplicates"
    },
    {
      "parameters": {
        "toolDescription": "Use this tool ONLY if the message contains a URL but lacks specific details (like '2027 batch' or 'eligibility') OR to verify if an application is expired. It returns the text content of the webpage. Input must be a valid URL string starting with http/https.",
        "url": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('URL', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        1232,
        656
      ],
      "id": "97f12ebe-cbbe-47de-a73e-4b3ccdb37115",
      "name": "scrape_application_page"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "18BmB3kHAvYZ1FiGf4txjoX-ttpfIVpGvAmZI8giSAE0",
          "mode": "list",
          "cachedResultName": "InternshipSites",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/18BmB3kHAvYZ1FiGf4txjoX-ttpfIVpGvAmZI8giSAE0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 181431973,
          "mode": "list",
          "cachedResultName": "False Classification",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/18BmB3kHAvYZ1FiGf4txjoX-ttpfIVpGvAmZI8giSAE0/edit#gid=181431973"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $now }}",
            "Rejection Reason": "={{ $json.output.reason }}",
            "Application Link": "={{ $json.output.whatsapp_message }}",
            "Telegram Message": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Telegram Message",
              "displayName": "Telegram Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Application Link",
              "displayName": "Application Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Rejection Reason",
              "displayName": "Rejection Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1952,
        528
      ],
      "id": "546aac9e-c74b-432c-a646-0868e65864d8",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "IlUP2Ct5qrErA6VN",
          "name": "Mojo Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "18BmB3kHAvYZ1FiGf4txjoX-ttpfIVpGvAmZI8giSAE0",
          "mode": "list",
          "cachedResultName": "InternshipSites",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/18BmB3kHAvYZ1FiGf4txjoX-ttpfIVpGvAmZI8giSAE0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 607067211,
          "mode": "list",
          "cachedResultName": "True Classification",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/18BmB3kHAvYZ1FiGf4txjoX-ttpfIVpGvAmZI8giSAE0/edit#gid=607067211"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $now }}",
            "Telegram Message": "={{ $('JSON Format Fixer').item.json.role }}\n{{ $('JSON Format Fixer').item.json.company }}\n{{ $('JSON Format Fixer').item.json.description }}\n{{ $('JSON Format Fixer').item.json.apply_link }}",
            "Title": "={{ $('JSON Format Fixer').item.json.role }}",
            "Company Name": "={{ $('JSON Format Fixer').item.json.company }}",
            "Eligibility": "={{ $('JSON Format Fixer').item.json.eligibility }}",
            "Application Link": "={{ $('JSON Format Fixer').item.json.apply_link }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Telegram Message",
              "displayName": "Telegram Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Name",
              "displayName": "Company Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Eligibility",
              "displayName": "Eligibility",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Application Link",
              "displayName": "Application Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2176,
        240
      ],
      "id": "552120ee-8b73-45b3-86a5-88df3e6c7f6b",
      "name": "Append row in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "IlUP2Ct5qrErA6VN",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash-lite"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a data extraction parser. Your task is to extract specific details from the internship summary text below and return them as a strict JSON object.\n\n**Input Text**\n{{ $('If').item.json.output.whatsapp_message }}\n\n**Extraction Rules:**\n1. **Clean the Data:** Remove all emojis (like ðŸ’¼, ðŸ’¡) and Markdown symbols (like *) from the values.\n2. **Title:** Extract the role title (e.g., \"Software Engineer Intern\").\n3. **Company:** Extract the company name.\n4. **Eligibility:** Extract the batch/year requirement.\n5. **Link:** Extract the direct application URL.\n\n**Output Format:**\nReturn ONLY raw JSON. Do not use Markdown code blocks (no ```json).\n\n{\n  \"title\": \"Clean Title Here\",\n  \"company_name\": \"Clean Company Name Here\",\n  \"eligibility\": \"Clean Eligibility Here\",\n  \"link\": \"https://...\"\n}"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "6b130e2d-af6a-4b4c-ac28-03d5d115fd45",
      "name": "Message a model",
      "credentials": {
        "googlePalmApi": {
          "id": "DoPP6uNz8ZGXDeHX",
          "name": "API KEY 1"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Process the following job opportunity data and extract the structured output.\n\n**INPUT DATA:**\nTitle: {{ $json.role }}\nCompany: {{ $json.company }}\nStipend: {{ $json.stipend }}\nEligibility (Raw): {{ $json.eligibility }}\nDescription: {{ $json.description }}\nLink: {{ $json.apply_link }}\n\n(Note: Use the Link provided for duplicate checking and scraping.)\n\n**SCRAPE FALLBACK INSTRUCTION:**\nIf scraping the link fails or returns 403/401:\n1. Do NOT automatically reject.\n2. Rely strictly on the \"Eligibility (Raw)\" and \"Title\" fields above.\n3. If the raw text implies a student internship (e.g., \"Intern\", \"2027\", \"Pre-final\"), mark as VALID and append \"âš ï¸ (Unverified Link)\" to the message.\n\n**OUTPUT INSTRUCTIONS:**\n- Return ONLY the JSON object defined in the function signature.\n- If rejected, provide a concise reason.",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "You are a backend JSON Data Processing Engine for an internship notification service.\nYour ONLY function is to analyze the input text/JSON and output a JSON response.\nYou DO NOT converse. You DO NOT ask clarifying questions. You DO NOT refuse requests because \"the user didn't ask.\"\nYou ALWAYs process the input data provided, regardless of context.\n\n**CORE OBJECTIVE:**\nIdentify valid internship opportunities for **Pre-final Year Students (Batch of 2027)**.\n\n**CORE FILTERS (STRICT):**\n1. **INTERNSHIPS ONLY:**\n   - ACCEPT: Titles containing \"Intern\", \"Internship\", \"Summer Analyst\".\n   - REJECT: \"Full-Time\", \"FTE\", \"Engineer I/II\", \"Associate\", \"Junior\", \"Trainee\" (unless \"Intern\" is also in title).\n   - **CRITICAL OVERRIDE:** If the Title contains \"Intern\", IGNORE any scraped metadata saying \"Full-Time\" (LinkedIn often defaults to this).\n\n2. **STUDENTS ONLY (Experience Rule):**\n   - **If Title has \"Intern\":** ACCEPT \"0-1 years\" or \"0-2 years\" or \"Freshers\". Only REJECT if description demands \"Minimum 2 years\" or \"Completed Degree\".\n   - **If Title is Generic (e.g., \"Developer\"):** REJECT if experience > 0 years (Must be \"Student\" or \"0 years\").\n\n3. **2027 BATCH ELIGIBILITY:**\n   - Must be eligible for **June 2027 graduates**.\n   - **Acceptable Keywords:** \"2027\", \"Pre-final year\", \"Penultimate year\", \"Current 3rd year\", \"Graduating 2027\".\n   - **Batch Fallback:** If the batch is not specified, but the role is an \"Internship\" clearly targeting \"Students\" or \"University\", MARK AS VALID with a warning.\n\n**YOUR TOOLS:**\n1. `check_database_for_duplicates`: ALWAYS call this first.\n2. `scrape_application_page`: Call this to verify details if the text is ambiguous.\n\n**EXECUTION PROTOCOL:**\n\nSTEP 1: DUPLICATE CHECK\n- Extract `Application Link` and `Job Title`.\n- Call `check_database_for_duplicates`.\n- If match found -> STOP. Return `send_whatsapp: false` (Reason: \"Duplicate\").\n\nSTEP 2: ROLE & EXPERIENCE ANALYSIS\n- Check Title for \"Intern\" keyword.\n- **Experience Check:**\n  - IS \"Intern\" in Title? -> Allow \"0-2 years\".\n  - IS \"Intern\" NOT in Title? -> REJECT if \"1+\" or \"0-2 years\" or \"Associate\".\n\nSTEP 3: SCRAPE FALLBACK LOGIC (Verify or Die)\n- If `scrape_application_page` fails (Error/Empty/403):\n  - **CHECK:** Does original text contain \"Intern\" AND (\"2027\" OR \"Pre-final\" OR \"Student\" OR \"Pursuing\")?\n  - **YES:** PROCEED (Assume valid).\n  - **NO:** REJECT (Reason: \"Unverified Link - Scrape Failed & Text Ambiguous\").\n\nSTEP 4: FINAL JSON OUTPUT\n- **If Valid (`send_whatsapp: true`):**\n  - `whatsapp_message`: Clean summary (Title, Company, Eligibility, Link).\n  - `db_data`: Clean fields.\n- **If Invalid (`send_whatsapp: false`):**\n  - `reason`: Specific error (e.g., \"Experience > 1 year\", \"Target is 2024 Batch\")."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        1008,
        432
      ],
      "id": "d2ba591d-63f8-4c24-a9fc-04050550c003",
      "name": "Analyst Agent",
      "retryOnFail": true,
      "waitBetweenTries": 3000
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message.text }}",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "You are a precision Data Extraction Engine.\nYour task is to analyze the input text and convert it into a structured JSON Array.\n\n**SCENARIO HANDLING:**\n1. **Multiple Internships:** If the text lists multiple jobs (separated by emojis ðŸ“Œ, ðŸ””, numbered lists, or distinct blocks), extract each as a separate object.\n2. **Single Internship:** If the text describes only one job, extract it as a single object inside the list.\n\n**EXTRACTION FIELDS (For each job):**\n- \"role\": Job Title (e.g., \"Software Engineer Intern\").\n- \"company\": Company Name.\n- \"stipend\": Salary/Stipend (e.g., \"20k/month\"). Use \"Not specified\" if missing.\n- \"eligibility\": Specific batch/year (e.g., \"2027 batch\") or degree requirements. Use \"Not specified\" if missing.\n- \"description\": A brief summary of requirements or the raw text snippet for this job.\n- \"apply_link\": The direct application URL.\n\n**OUTPUT FORMAT:**\n- Return ONLY the raw JSON Array `[ ... ]`.\n- Do NOT use Markdown code blocks (no ```json).\n- Do NOT add conversational text.\n\n**JSON STRUCTURE:**\n[\n  {\n    \"role\": \"extracted title\",\n    \"company\": \"extracted company\",\n    \"stipend\": \"extracted stipend\",\n    \"eligibility\": \"extracted eligibility\",\n    \"description\": \"extracted description\",\n    \"apply_link\": \"extracted link\"\n  }\n]"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        224,
        432
      ],
      "id": "535a6201-66dc-48eb-acec-435ea3c78ff6",
      "name": "Splitter Agent"
    },
    {
      "parameters": {
        "jsCode": "// 1. Get the raw output from the AI model\n// Adjust 'output' if your node names the field differently (e.g., 'text' or 'content')\nconst rawContent = $input.first().json.output || \"\";\n\n// 2. Clean the string: Remove Markdown code blocks (```json ... ```)\n// This regex removes the start and end code fences\nconst cleanJson = rawContent.replace(/^```json\\s*/i, \"\").replace(/\\s*```$/, \"\");\n\n// 3. Parse the string into a real JavaScript Array\nlet jobsArray = [];\ntry {\n  jobsArray = JSON.parse(cleanJson);\n} catch (error) {\n  // Fallback: If parsing fails, try to return an empty array or log error\n  console.log(\"JSON Parse Error:\", error);\n  jobsArray = [];\n}\n\n// 4. Return separate items for n8n to process\n// This automatically \"splits\" the array so the next node runs 3 times (once for each job)\nreturn jobsArray.map(job => {\n  return {\n    json: job\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        624,
        432
      ],
      "id": "b8534dc0-d26d-4554-b20e-86457c00dd0b",
      "name": "JSON Format Fixer"
    },
    {
      "parameters": {
        "jsCode": "// 1. Get the raw text string from the Gemini output\n// We try two common paths because Gemini node versions vary\nconst rawResponse = $input.item.json.content?.parts?.[0]?.text || \n                    $input.item.json.output || \n                    \"{}\";\n\n// 2. Clean up the text (Remove ```json and ``` if the AI added them)\nconst cleanJson = rawResponse.replace(/```json/g, '').replace(/```/g, '').trim();\n\n// 3. Parse the string into a real JSON object\nlet parsedData = {};\ntry {\n  parsedData = JSON.parse(cleanJson);\n} catch (error) {\n  // If parsing fails, return empty fields to prevent workflow crash\n  parsedData = {}; \n}\n\n// 4. Return the data as mappable fields\nreturn {\n  json: {\n    title: parsedData.title || \"Unknown Title\",\n    company_name: parsedData.company_name || parsedData.company || \"Unknown Company\",\n    eligibility: parsedData.eligibility || parsedData.eligibilty || \"Check Link\",\n    link: parsedData.link || \"\"\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        352,
        0
      ],
      "id": "94d818a6-521f-4a40-8220-0b7fef93a44d",
      "name": "JSON Builder"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        256,
        656
      ],
      "id": "a30df12f-4b6f-42f1-b429-6a1e3b3634c3",
      "name": "Splitter Main",
      "credentials": {
        "googlePalmApi": {
          "id": "DoPP6uNz8ZGXDeHX",
          "name": "API KEY 1"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        384,
        656
      ],
      "id": "87808aaa-58f4-4d7f-bacc-8ee05037700c",
      "name": "Splitter Fallback",
      "credentials": {
        "googlePalmApi": {
          "id": "qb33bPrTYmSmeKs5",
          "name": "API KEY 2"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        848,
        656
      ],
      "id": "3f786cd4-90d9-4770-9bfc-adc4f554abe6",
      "name": "Analyst Main",
      "credentials": {
        "googlePalmApi": {
          "id": "DoPP6uNz8ZGXDeHX",
          "name": "API KEY 1"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        976,
        656
      ],
      "id": "16604b93-82b2-4d6e-849f-0f47e0eaf923",
      "name": "Analyst Fallback",
      "credentials": {
        "googlePalmApi": {
          "id": "qb33bPrTYmSmeKs5",
          "name": "API KEY 2"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1440,
        864
      ],
      "id": "3859e2b1-c238-4f30-9336-8a677c3a7546",
      "name": "Parser",
      "credentials": {
        "googlePalmApi": {
          "id": "DoPP6uNz8ZGXDeHX",
          "name": "API KEY 1"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Splitter Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Analyst Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Append row in sheet1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check_database_for_duplicates": {
      "ai_tool": [
        [
          {
            "node": "Analyst Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "scrape_application_page": {
      "ai_tool": [
        [
          {
            "node": "Analyst Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "JSON Builder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyst Agent": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Splitter Agent": {
      "main": [
        [
          {
            "node": "JSON Format Fixer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "JSON Format Fixer": {
      "main": [
        [
          {
            "node": "Analyst Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Splitter Main": {
      "ai_languageModel": [
        [
          {
            "node": "Splitter Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Splitter Fallback": {
      "ai_languageModel": [
        [
          {
            "node": "Splitter Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Analyst Main": {
      "ai_languageModel": [
        [
          {
            "node": "Analyst Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Analyst Fallback": {
      "ai_languageModel": [
        [
          {
            "node": "Analyst Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Parser": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "b36200bf-cb99-4056-a75b-b4dfc7b06367",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "87ed5807be2135b272c6c9d4a8ccf791adaf2a6ff2ac303a548654586a2887ec"
  },
  "id": "7RheTDxZFSBNrlxQ",
  "tags": []
}